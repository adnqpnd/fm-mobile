<ion-view view-title="Load In View">
  <ion-content class="darkbg transparent">
      <div class="card">
           <div class="item item-divider">
            <h2>{{delivery.customer_id.establishment_name}}</h2>
            </div>
      
          <form name="loadInViewForm" ng-submit="addLoadIn(loadIn)" novalidate>
            <div class="row loadinContent">
             <label class="col col-10">Product:</label>

            <div class="col col-40">
                <select class = "form-control" ng-model="loadIn.product" ng-change="getBays(loadIn.product);getProdDate(loadIn.product)" ng-options="loadOut as prodName(loadOut.sku_id) for loadOut in deliveries[0].products" required>
                </select>
            </div>

              <label class="col col-10">Line:</label>

            <div class="col col-40" ng-hide="noBays">
                <select class = "form-control" ng-model="loadIn.bay" ng-options="bay as bayName(bay) for bay in bays" required>
                </select>
            </div>

            <div ng-show="noBays" class="col col-40">
                No Line Available
            </div>
        
          &nbsp; &nbsp;

            <label class="col col-10">Returns:</label>

            <div class="col col-40">
             <input class="form-control" type="number" ng-model="loadIn.returns" required>
            </div>
          </div>

          <div class="row loadinContent">
            <label class="col col-25">Production Date:</label>

            <div class="col col-75">
               <input class ="form-control" type="date" ng-model="loadIn.prodDate" required>
            </div>
          </div>   

             <div>
              <button type="submit" ng-disabled="loadInViewForm.$invalid" class="button button-small balanced pull-right liButton" style="">

              ADD
              </button>
           </div> 

             </form>  
      </div>

          <h1>Total Amount {{totalAmount}}</h1>

          <table>
            <thead>
              <th>Product</th>
              <th>Bay</th>
              <th>Returns</th>
              <th>Prod. Date</th>
              <th></th>
            </thead>
            <tbody>
              <tr ng-repeat="loadIn in loadIns">
                <td>{{loadIn.sku.prod_id.brand_name}} {{loadIn.sku.sku_name}}</td>
                <td>Bay {{loadIn.bay.bay_name}}</td>
                <td>{{loadIn.cases}}</td>
                <td>{{loadIn.prod_date}}</td>
                <td><button ng-click="deleteLoadIn($index,loadIn)">Delete</button></td>
              </tr>
            </tbody>
          </table>

         <div ng-show="loadIns.length !== 0">
              <button ng-click="confirm()" ng-disabled="loadIns.lenght === 0" class="button button-small balanced pull-right liButton" style="">

              CONFIRM
              </button>
           </div> 
  </ion-content>
</ion-view>
